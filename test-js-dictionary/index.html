<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <title>Document</title>
</head>
<body>
    <div class="container">
        
            <div class="navBar">
                <button id="dictionary_button" class="trans_btn"><span class="material-symbols-outlined icon">book_2</span></button>
                    <div class="toggle_container">
                        <select id="select_font" onchange="changeFont(this);">
                            <option value="Serif">Serif</option>
                            <option value="Sans-serif">Sans Serif</option>
                            <option value="Monospace">Monospace</option>
                        </select>

                        <label class="switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="slider material-symbols-rounded">toggle_off</span>
                        </label>
                        <button class="toggle_button trans_btn"><span class="material-symbols-outlined">dark_mode</span></button>
                    </div>  
            </div>
        
        <div class="searchBar">
                <input type="text" id="search_input">
                <button id="search_button" class="trans_btn material-symbols-outlined icon">search</button>
        </div>
        <div id="wordInfo" class="result" style="display:none;"></div>
    </div>

    <script>

        const toggle_button = document.querySelector('.toggle_button');
        const darkModeToggle = document.getElementById('darkModeToggle');
        let isDarkMode = false;


        const toggleDarkMode = () => {
            isDarkMode = !isDarkMode;
            document.body.style.backgroundColor = isDarkMode ? '#333333' : '#f0f0f0';
            document.body.style.color = isDarkMode ? '#ffffff' : '#333333';
            toggle_button.innerHTML = isDarkMode ? '<span class="material-symbols-rounded">light_mode</span>' : '<span class="material-symbols-outlined">dark_mode</span>';
            darkModeToggle.checked = isDarkMode;
        }

        toggle_button.addEventListener('click', toggleDarkMode);
        darkModeToggle.addEventListener('change', toggleDarkMode);

        document.getElementById('search_button').addEventListener('click', function() {
            const keyword = document.getElementById('search_input').value;
            fetch(`https://api.dictionaryapi.dev/api/v2/entries/en_US/${keyword}`)
                .then(response => response.json())
                .then(data => {
                    const wordInfo = data[0];
                    let output = `<h2>${wordInfo.word}</h2>`;
                    output += `<p><span class="ejaan-text"> ${wordInfo.phonetics[0].text}</span></p>`;
                    output += `<div class="audio-control"><i class="fa fa-play-circle fa-4x"></i>
                                    <audio id="audioPlayer" style="display: none;">
                                        <source src="${wordInfo.phonetics[0].audio}" type="audio/mpeg">
                                    </audio>
                                </div>`;


                    wordInfo.meanings.forEach(meaning => {
                        output += `<h3>${meaning.partOfSpeech}</h3>`;
                        meaning.definitions.forEach((definition, index) => {
                            output += `<p>${index + 1}. ${definition.definition} (${definition.example ? 'Example: ' + definition.example : ''})</p>`;
                        });
                    });

                    document.getElementById('wordInfo').innerHTML = output;
                    document.getElementById('wordInfo').style.display = 'block';
                    document.querySelector('.audio-control').addEventListener('click', function(){
                        const audio = document.querySelector('audio');
                        if(audio.paused){
                            audio.play();
                        } else {
                            audio.pause();
                        }
                    });
                })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('wordInfo').innerHTML = "Can't be blank";
                document.getElementById('wordInfo').style.display = 'block';
            });
            
    });
    </script>
</body>
</html>